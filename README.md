Отчёт о выполнении проектной работы по настройке мониторинга интернет-магазина OpenCart
  
В рамках данной проектной работы была реализована система мониторинга для интернет-магазина OpenCart, развёрнутого на виртуальной машине. Основной целью проекта являлось создание комплексного решения для отслеживания работоспособности веб-приложения, сбора метрик производительности и логов, а также настройка системы оповещения о критических событиях. При выборе сетапа учитывалось ограниченность ресурсов для развертывания инфраструктуры.

Описание инфраструктуры
Для реализации проекта использовалась виртуальная машина с следующими характеристиками:

Платформа: VirtualBox 7.0

ОС: Ubuntu 22.04 LTS

Ресурсы: 2 ядра CPU, 8 ГБ RAM, 45 ГБ SSD


Основные компоненты системы:
Веб-сервер: Nginx 
СУБД: MySQL 
Обработчик PHP: PHP-FPM 8.3



Система мониторинга и логирования: Prometheus, Promtail, Alertmanager, Grafana, Loki

Компоненты мониторинга (Grafana, Loki) были развёрнуты в Docker-контейнерах для обеспечения изоляции и экoномии ресурсов.


Развёртывание OpenCart
Установка базовых компонентов

Перед установкой OpenCart были выполнены следующие шаги:
Настройка MySQL: Создание отдельной базы данных и пользователя для OpenCart. Оптимизация конфигурации для работы с ограниченными ресурсами
    
Конфигурация PHP-FPM:Настройка пула процессов. Оптимизация параметров 



Установка и настройка OpenCart 
Загрузка версии OpenCart. Настройка прав доступа к файлам. Конфигурация виртуального хоста в Ngin. Завершение установки через веб-интерфейс


Настройка системы мониторинга. Развёртывание Prometheus. Были настроены следующие scrape-конфигурации: Мониторинг самого сервера через Node Exporter. Сбор метрик Nginx. Мониторинг состояния MySQL. Проверка доступности веб-интерфейса через Blackbox Exporter





Развёртывание Grafana. Grafana была настроена для визуализации метрик и логов. Настройка Promtail для сбора логов. 


Интеграция компонентов. Все компоненты системы мониторинга были интегрированы между собой: Prometheus собирает метрики с различных экспортеров. Alertmanager обрабатывает алерты и отправляет уведомления. Grafana отображает данные из Prometheus и Loki


В результате проделанной работы была реализована система мониторинга, которая: В реальном времени отслеживает состояние сервера и приложения. Обеспечивает сбор и анализ логов. Автоматически оповещает о критических событиях. Позволяет анализировать исторические данные о производительности. Система успешно прошла нагрузочное тестирование и показала стабильную работу при средней нагрузке.


Данный проект продемонстрировал эффективность использования современных инструментов мониторинга для обеспечения стабильной работы веб-приложений.


------------------------------------------------------------------------------------------------------


Для построения более масштабируемой и отказоустойчивой системы на замену текущему стеку стоит рассмотреть следующие решения, сохраняя баланс между производительностью и сложностью поддержки.

Веб-сервер и балансировка
Nginx остаётся хорошим выбором для фронтенда, но для горизонтального масштабирования лучше добавить Kubernetes Ingress Controller (например, Nginx Ingress или Traefik). Это позволит автоматически управлять роутингом при добавлении новых серверов. Для высоконагруженных проектов можно рассмотреть Envoy как более производительную альтернативу.

База данных
MySQL подходит для небольших проектов, но при росте нагрузки стоит перейти на PostgreSQL с его лучшей поддержкой сложных запросов и партиционированием. Для полной отказоустойчивости можно развернуть Percona XtraDB Cluster или Amazon Aurora, если используется облако. Для кэширования добавить Redis Cluster вместо локального файлового кэша OpenCart.


Мониторинг
Prometheus + Alertmanager остаются стандартом для сбора метрик, но для масштабирования лучше добавить Thanos или VictoriaMetrics для долгосрочного хранения и глобального доступа к данным. Grafana можно оставить как интерфейс, но развернуть её в режиме HA (High Availability) с несколькими репликами.

Логирование
Loki удобен для небольших систем, но ELK-стек (Elasticsearch + Logstash + Kibana) лучше подходит для масштабирования. Kibana — мощная визуализация с возможностью сложных запросов и дашбордов, что трудно сказать про Grafan'у. Для экономии ресурсов также можно использовать OpenSearch с более гибкой лицензией.

Развёртывание и оркестрация
Kubernetes Автоматическое восстановление контейнеров. Горизонтальное масштабирование под нагрузку. Удобное обновление приложений. Резервное копирование и отказоустойчивость

Миграция с текущего стека -> Начать с переноса мониторинга на ELK + VictoriaMetrics. Развернуть Kubernetes и перенести OpenCart в виде Helm-чарта. Постепенно заменить MySQL на PostgreSQL с репликацией. Настроить автоматическое масштабирование.
Такой подход обеспечит плавный переход без простоев и позволит масштабироваться под любую нагрузку.



![scrin01](https://github.com/user-attachments/assets/c242b703-8b8d-451e-8ee1-b5a1b9e2c514)
![scrin02](https://github.com/user-attachments/assets/24652ed0-68bb-43a0-aba8-572330ef716c)
![scrin1](https://github.com/user-attachments/assets/525033c8-e342-4421-b234-2d9c2db8e66a)
![scrin2](https://github.com/user-attachments/assets/05521538-ebf8-45c6-bba1-1e5e3f8ce05d)
![scrin3](https://github.com/user-attachments/assets/171016de-1bb8-4f56-a513-adf121458cd8)
![scrin4](https://github.com/user-attachments/assets/63414df8-a30e-4b9a-88c4-fbcb60694679)

![scrin00](https://github.com/user-attachments/assets/7f4fdfcc-9210-4556-a019-efec669d44e2)
![scrin000](https://github.com/user-attachments/assets/982f3110-41f2-4cfa-9413-445d812af255)


