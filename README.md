Отчёт о выполнении проектной работы по настройке мониторинга интернет-магазина OpenCart

В рамках данной проектной работы была реализована система мониторинга для интернет-магазина OpenCart, развёрнутого на виртуальной машине. Основной целью проекта являлось создание комплексного решения для отслеживания работоспособности веб-приложения, сбора метрик производительности и логов, а также настройка системы оповещения о критических событиях.

Описание инфраструктуры
Для реализации проекта использовалась виртуальная машина с следующими характеристиками:
Платформа: VirtualBox 7.0
ОС: Ubuntu Server 22.04 LTS
Ресурсы: 2 ядра CPU, 8 ГБ RAM, 50 ГБ HDD


Основные компоненты системы:
Веб-сервер: Nginx 
СУБД: MySQL 
Обработчик PHP: PHP-FPM 8.1
Система мониторинга и логирования:
Prometheus 
Promtail
Alertmanager 
Grafana
Grafana Loki
Rомпоненты мониторинга (Grafana, Loki) были развёрнуты в Docker-контейнерах для обеспечения изоляции и экномии ресурсов.

Развёртывание OpenCart
Установка базовых компонентов
Перед установкой OpenCart были выполнены следующие шаги:

Обновление системы и установка необходимых пакетов:
Настройка MySQL:
Создание отдельной базы данных и пользователя для OpenCart
Оптимизация конфигурации для работы с ограниченными ресурсами
Конфигурация PHP-FPM:
Настройка пула процессов
Оптимизация параметров memory_limit и max_execution_time
Установка и настройка OpenCart
Загрузка последней версии OpenCart с официального сайта
Настройка прав доступа к файлам
Конфигурация виртуального хоста в Nginx с поддержкой ЧПУ
Завершение установки через веб-интерфейс

Настройка системы мониторинга
Развёртывание Prometheus
Для сбора метрик был развёрнут Prometheus в Docker-контейнере. Были настроены следующие scrape-конфигурации:
Мониторинг самого сервера через Node Exporter
Сбор метрик Nginx
Мониторинг состояния MySQL
Проверка доступности веб-интерфейса через Blackbox Exporter

Настройка Alertmanager
Alertmanager был настроен для обработки и маршрутизации предупреждений. Были определены следующие основные правила алертинга:
Свободная оперативная память < 10%
Свободное место на диске < 15%


Развёртывание Grafana
Grafana была настроена для визуализации метрик и логов. 


Настройка Loki для сбора логов
Для сбора и анализа логов был развёрнут Grafana Loki. 

Интеграция компонентов
Все компоненты системы мониторинга были интегрированы между собой:
Prometheus собирает метрики с различных экспортеров
Alertmanager обрабатывает алерты и отправляет уведомления
Grafana отображает данные из Prometheus и Loki
Loki агрегирует логи со всех компонентов системы


Результаты
В результате проделанной работы была реализована система мониторинга, которая:
В реальном времени отслеживает состояние сервера и приложения
Обеспечивает сбор и анализ логов
Автоматически оповещает администратора о критических событиях
Позволяет анализировать исторические данные о производительности
Система успешно прошла нагрузочное тестирование и показала стабильную работу при средней нагрузке.

Данный проект продемонстрировал эффективность использования современных инструментов мониторинга для обеспечения стабильной работы веб-приложений. Реализованное решение может быть легко масштабировано для работы с несколькими серверами и более сложными конфигурациями.
